(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),c=n.n(o),r=n(18),i=n.n(r),s=(n(26),n(9)),l=n(4),u=n(5),h=n(7),g=n(6);n(27),n(28);function m(e){var t=e.onClick;return Object(a.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})}n(29);function d(e){var t=e.images,n=e.onClick;return Object(a.jsx)(a.Fragment,{children:t.map((function(e){return Object(a.jsx)("li",{className:"ImageGalleryItem",children:Object(a.jsx)("img",{onClick:n,src:e.webformatURL,"data-sourse":e.largeImageURL,alt:"",className:"ImageGalleryItem-image"})},e.id)}))})}n(30);function p(e){var t=e.images,n=e.onClick;return Object(a.jsx)("div",{children:Object(a.jsx)("ul",{className:"ImageGallery",children:Object(a.jsx)(d,{images:t,onClick:n})})})}var b=n(19),j=n.n(b),f=(n(52),function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose(t)},e.handleBackdropClick=function(t){t.currentTarget===t.target&&(console.log("\u041a\u043b\u0438\u043a \u043d\u0430 \u0431\u0435\u043a\u0434\u0440\u043e\u043f"),e.props.onClose(t))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){console.log("Modal componentDidMount"),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){console.log("Modal componentWillUnmount"),window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"Overlay",onClick:this.handleBackdropClick,children:Object(a.jsx)("div",{className:"Modal",children:Object(a.jsx)("img",{src:this.props.largeImageURL,alt:""})})})}}]),n}(o.Component)),v=(n(53),function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={inputValue:""},e.handleChange=function(t){e.setState({inputValue:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.inputValue),e.setState({inputValue:""})},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsx)("header",{className:"Searchbar",onSubmit:this.handleSubmit,children:Object(a.jsxs)("form",{className:"SearchForm",children:[Object(a.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(a.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(a.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.inputValue,onChange:this.handleChange})]})})}}]),n}(o.Component)),O=n(20),y=n.n(O),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="19307770-0b075029944e7b654fbe75927";return y.a.get("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat(n,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.data.hits}))},x=function(e){Object(h.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={images:[],loading:!1,error:null,searchQuery:"",page:1,showModal:!1,largeImageURL:null},e.fetchImages=function(){var t=e.state,n=t.searchQuery,a=t.page;e.setState({loading:!0}),w(n,a).then((function(t){e.setState((function(e){return{images:[].concat(Object(s.a)(e.images),Object(s.a)(t)),page:e.page+1}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){return e.setState({loading:!1})}))},e.handleSearchBarSubmit=function(t){e.setState({searchQuery:t,page:1,images:[]})},e.toggleModal=function(t){var n=t.target.dataset.sourse;e.setState((function(e){return{showModal:!e.showModal,largeImageURL:n}}))},e}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=t.searchQuery,a=this.state.searchQuery,o=this.state.page;n!==a&&this.fetchImages(),o>2&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.images,n=e.loading,o=e.error,c=e.showModal,r=e.largeImageURL;return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(v,{onSubmit:this.handleSearchBarSubmit}),o&&Object(a.jsxs)("div",{children:["message=","Whoops, something went wrong:".concat(o.message)]}),n&&Object(a.jsx)(j.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:500}),t.length>0&&!n&&Object(a.jsx)(p,{images:t,onClick:this.toggleModal}),t.length>0&&!n&&Object(a.jsx)(m,{onClick:this.fetchImages}),c&&Object(a.jsx)(f,{largeImageURL:r,onClose:this.toggleModal})]})}}]),n}(o.Component),S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,73)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),c(e),r(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(x,{})}),document.getElementById("root")),S()}},[[72,1,2]]]);
//# sourceMappingURL=main.65018066.chunk.js.map